# GitHub Copilot Workspace Settings for Golem Vanity Address Generator CLI

# Code generation preferences
code_style:
  typescript:
    semicolons: true
    quotes: single
    indent_size: 2
    trailing_commas: true
    strict_mode: true
    target: ES2020
    module: CommonJS
    experimentalDecorators: false
    strictNullChecks: true

  python:
    indent_size: 4
    line_length: 88
    quotes: double

# Testing preferences
testing:
  framework_preferences:
    typescript: jest
    javascript: jest

  test_file_naming:
    typescript: "*.test.ts"
    javascript: "*.test.js"

  test_location: "src/__tests__/"

  coverage_target: 90

  required_test_patterns:
    - unit_tests_for_cryptographic_functions
    - integration_tests_for_golem_network
    - performance_tests_for_distributed_generation
    - edge_cases_for_elliptic_curve_operations

# Security preferences
security:
  crypto_libraries:
    - elliptic # secp256k1 operations
    - ethers # Ethereum address generation
    - crypto # Node.js built-in for secure random

  avoid_patterns:
    - hardcoded_private_keys
    - insecure_random_generation
    - storing_private_keys
    - transmitting_private_keys
    - bypassing_elliptic_curve_validation
    - unvalidated_public_keys

  required_validations:
    - public_key_format_validation # 65 bytes, 0x04 prefix
    - elliptic_curve_point_validation
    - vanity_pattern_length_limits # 1-16 hex characters
    - budget_limit_validation
    - provider_reputation_tracking

  cryptographic_requirements:
    - secp256k1_curve_operations
    - ethereum_address_derivation
    - secure_salt_generation
    - multi_layer_result_verification

# Documentation preferences
documentation:
  required_for:
    - cryptographic_operations
    - distributed_computing_patterns
    - appcontext_usage
    - provider_interaction_logic
    - opentelemetry_tracing

  style:
    typescript: tsdoc
    javascript: jsdoc

  patterns:
    - document_appcontext_parameter
    - explain_cryptographic_operations
    - reference_mathematical_formulas
    - include_opentelemetry_examples

# Performance preferences
performance:
  optimization_targets:
    - distributed_provider_utilization
    - elliptic_curve_computation_speed
    - memory_efficient_rolling_windows
    - cost_optimized_provider_selection
    - parallel_processing_coordination

  monitoring_points:
    - provider_hash_rates
    - budget_utilization_efficiency
    - opentelemetry_trace_performance
    - database_operation_latency
    - network_communication_overhead

  distributed_computing:
    - optimal_worker_pool_sizing
    - provider_rental_duration_balancing
    - cost_vs_performance_trade_offs

# Project-specific patterns
golem_vanity_address:
  supported_cryptocurrency: ethereum

  pattern_types:
    - hex_prefix_only # Focus on Ethereum address prefixes

  validation_rules:
    - max_pattern_length: 16 # hex characters
    - min_pattern_length: 1
    - allowed_characters: "0-9a-fA-F" # hex only
    - case_insensitive: true
    - difficulty_calculation: "16^(length-2)"

  processing_units:
    - cpu # Dynamic core detection
    - gpu # CUDA optimization with vm-nvidia engine

  golem_network:
    - provider_selection: cost_optimized
    - reputation_tracking: enabled
    - automatic_recovery: enabled
    - budget_monitoring: continuous

  cryptographic_operations:
    - curve: secp256k1
    - public_key_format: "65_bytes_0x04_prefix"
    - address_generation: ethereum_standard
    - validation_method: elliptic_curve_point_addition

# Code organization preferences
file_organization:
  structure:
    - src/app/ # CLI application and options validation
    - src/lib/db/ # Database schema and operations
    - src/node_manager/ # Golem Network provider management
    - src/estimator/ # Statistical estimation algorithms
    - src/scheduler/ # Orchestration and business logic
    - src/services/ # Service layer implementations
    - src/ui/ # User interface components
    - src/utils/ # Utility functions
    - src/__tests__/ # Test files
    - monitoring/ # Observability stack configuration
    - tools/ # Build and development tools

  naming_conventions:
    files: snake_case # Following existing project patterns
    functions: camelCase
    classes: PascalCase
    constants: UPPER_SNAKE_CASE
    interfaces: PascalCase
    types: PascalCase

  key_files:
    - src/instrumentation.ts # MUST be imported first
    - src/app_context.ts # Immutable dependency injection
    - src/params.ts # Core interfaces
    - src/validator.ts # Cryptographic validation
    - drizzle.config.ts # Database configuration

# Error handling preferences
error_handling:
  custom_error_classes: true
  error_codes: true
  logging_level: info
  graceful_degradation: true

  patterns:
    - appcontext_error_propagation
    - opentelemetry_error_recording
    - provider_failure_recovery
    - budget_exhaustion_handling
    - cryptographic_validation_errors

  required_contexts:
    - always_pass_appcontext
    - include_opentelemetry_spans
    - structured_logging_with_context

# Dependency management
dependencies:
  core_packages:
    distributed_computing: "@golem-sdk/golem-js@^3.5.1"
    crypto: "elliptic@^6.6.1"
    ethereum: "ethers@^6.14.3"
    database: "drizzle-orm@^0.44.2"
    cli: "commander@^11.0.0"
    reactive: "rxjs@^7.8.2"

  observability_stack:
    tracing: "@opentelemetry/api"
    metrics: "@opentelemetry/metrics"
    logging: "pino"

  development_tools:
    testing: "jest@^29.5.0"
    typescript: "typescript@^5.8.3"
    linting: "eslint@^9.28.0"
    formatting: "prettier@3.5.3"

  security_requirements:
    - security_scanning: true
    - version_pinning: true
    - minimal_dependencies: true
    - regular_audits: true

  architecture_patterns:
    - immutable_context_injection
    - type_safe_database_operations
    - enterprise_observability
    - graceful_shutdown_handling

# OpenTelemetry integration
observability:
  required_patterns:
    - trace_all_major_operations
    - structured_logging_with_context
    - metrics_collection_for_performance
    - distributed_tracing_correlation

  key_metrics:
    - provider_performance_tracking
    - budget_utilization_monitoring
    - cryptographic_operation_timing
    - network_communication_latency

  logging_outputs:
    - logs/traces.jsonl
    - logs/metrics.jsonl
    - logs/logs.jsonl
